name: Burlesco Deploy
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on:
  push:
    branches: [ master, test ]
jobs:
  Deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
      - name: Use Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '14.x'
      - name: Get extension signing key
        env:
          PKCS8_KEY: ${{ secrets.PKCS8_KEY }}
        run: |
          echo "$PKCS8_KEY" > burlesco-pkcs8-key.pem
      - name: Lint
        run: |
          make lint
      - name: Build
        run: |
          make build
      - name: Update manifest for extensions
        run: |
          bash scripts/gen-gh-pages.sh
